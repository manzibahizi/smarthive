<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beekeeping Tips - Smart Hive</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">Smart Hive Solution</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample" aria-controls="navbarsExample" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarsExample">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="/">Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="/hives">Hives</a></li>
                    <li class="nav-item"><a class="nav-link" href="/weather">Weather</a></li>
                    <li class="nav-item"><a class="nav-link" href="/analytics">Analytics</a></li>
                    <li class="nav-item"><a class="nav-link" href="/settings">Settings</a></li>
                    <li class="nav-item"><a class="nav-link active" aria-current="page" href="/tips">Tips</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="py-5" style="background: linear-gradient(135deg, #ecfdf5 0%, #e0f2fe 100%); border-bottom: 1px solid rgba(17,24,39,.06)">
        <div class="container text-center">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <div></div>
                <div>
                    <h1 class="display-6 fw-bold mb-2">Beekeeping Tips <span>üêù</span></h1>
                    <p class="text-muted mb-0">Practical advice to keep your colonies healthy and productive.</p>
                </div>
                <div id="adminButtons" style="display: none;">
                    <a href="/admin-tips.html" class="btn btn-success btn-sm">
                        <i class="fas fa-plus me-1"></i>Add Tips
                    </a>
                    <a href="/admin-training.html" class="btn btn-primary btn-sm">
                        <i class="fas fa-graduation-cap me-1"></i>Add Training
                    </a>
                </div>
            </div>
        </div>
    </section>

    <div class="container my-5">
        <div id="tipsGrid" class="row g-4"></div>
        <div class="text-center mt-4">
            <a href="/training" class="btn btn-primary btn-lg">Explore Training Programs</a>
        </div>
    </div>

    <script>
    async function loadTips() {
        try {
            const res = await fetch('/api/tips');
            const data = await res.json();
            const list = Array.isArray(data.tips) ? data.tips : [];
            const grid = document.getElementById('tipsGrid');
            grid.innerHTML = '';
            list.forEach((t, idx) => {
                const col = document.createElement('div');
                col.className = 'col-12 col-md-6';
                col.innerHTML = `
                <div class="card tip-card h-100">
                    <div class="card-body">
                        <div class="d-flex align-items-start">
                            <div class="tip-badge me-3">${t.icon ? t.icon : '‚ú®'}</div>
                            <div>
                                <h5 class="card-title mb-1">${t.title}</h5>
                                <p class="card-text mb-0">${t.description}</p>
                            </div>
                        </div>
                    </div>
                </div>`;
                grid.appendChild(col);
            });
        } catch (e) { console.error('Failed to load tips', e); }
    }

    // Show admin buttons only for admins
    fetch('/api/auth/me').then(r=>r.json()).then(d=>{
        if(d && d.user && d.user.role === 'admin'){
            const adminButtons = document.getElementById('adminButtons');
            if(adminButtons) adminButtons.style.display = 'flex';
        }
    }).catch(()=>{});

    loadTips();
    </script>
    <script src="/js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
 </body>
 </html>


